# Workspace-level Cargo configuration
#
# TIP: Use the aliases below for convenience:
#   cargo pico2           # build pico2
#   cargo pico2-fast-oc   # build with overclock + fast outlines

[env]
DEFMT_LOG = "debug"

# ARM Cortex-M33 target settings (Pico 2 / RP2350)
[target.thumbv8m.main-none-eabihf]
rustflags = [
    "-C", "link-arg=--nmagic",
    "-C", "link-arg=-Tlink.x",
    "-C", "link-arg=-Tdefmt.x",
    "-C", "target-cpu=cortex-m33",
]
runner = "tools/picotool.exe load -u -v -x -t elf"

# Convenient aliases
[alias]
pico2 = "build -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release"
pico2-run = "run -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release"
pico2-fast = "build -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release --features simple-outline"
pico2-fast-run = "run -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release --features simple-outline"
# Overclock: 250 MHz @ 1.10V (optimal SPI timing)
pico2-oc = "build -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release --features overclock"
pico2-oc-run = "run -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release --features overclock"
pico2-fast-oc = "build -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release --features simple-outline,overclock"
pico2-fast-oc-run = "run -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release --features simple-outline,overclock"
# Turbo: 375 MHz @ 1.30V (maximum performance)
pico2-turbo = "build -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release --features turbo-oc"
pico2-turbo-run = "run -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release --features turbo-oc"
pico2-fast-turbo = "build -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release --features simple-outline,turbo-oc"
pico2-fast-turbo-run = "run -p dashboard-pico2 --target thumbv8m.main-none-eabihf --release --features simple-outline,turbo-oc"
